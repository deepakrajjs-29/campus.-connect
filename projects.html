<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project Collaboration - Campus Connect</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 50%, #16213e 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #fff;
    }

    .navbar {
      background: rgba(26, 26, 46, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .navbar-brand {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .nav-link {
      color: rgba(255, 255, 255, 0.8) !important;
      font-weight: 500;
      margin: 0 0.5rem;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .nav-link:hover, .nav-link.active {
      color: #4facfe !important;
    }

    .page-header {
      padding: 3rem 0 2rem;
      text-align: center;
    }

    .page-title {
      font-size: 3rem;
      font-weight: 700;
      background: linear-gradient(135deg, #fff 0%, #4facfe 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1rem;
    }

    .page-subtitle {
      color: rgba(255, 255, 255, 0.7);
      font-size: 1.2rem;
    }

    .action-bar {
      background: rgba(26, 26, 46, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      backdrop-filter: blur(10px);
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .search-box {
      flex: 1;
      min-width: 250px;
      display: flex;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 50px;
      overflow: hidden;
    }

    .search-input {
      flex: 1;
      background: transparent;
      border: none;
      padding: 0.8rem 1.5rem;
      color: #fff;
      outline: none;
    }

    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    .filter-select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 25px;
      padding: 0.8rem 1.5rem;
      color: #fff;
      outline: none;
      cursor: pointer;
    }

    .filter-select option {
      background: #1a1a2e;
      color: #fff;
    }

    .btn-create {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      color: #fff;
      padding: 0.8rem 2rem;
      border-radius: 25px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .btn-create:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(67, 233, 123, 0.4);
    }

    .project-card {
      background: rgba(26, 26, 46, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .project-card:hover {
      border-color: #4facfe;
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: start;
      margin-bottom: 1rem;
    }

    .project-tag {
      display: inline-block;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: #fff;
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .project-status {
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .status-open {
      background: rgba(67, 233, 123, 0.2);
      color: #43e97b;
      border: 1px solid #43e97b;
    }

    .status-in-progress {
      background: rgba(255, 193, 7, 0.2);
      color: #ffc107;
      border: 1px solid #ffc107;
    }

    .status-completed {
      background: rgba(79, 172, 254, 0.2);
      color: #4facfe;
      border: 1px solid #4facfe;
    }

    .project-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: #fff;
      margin-bottom: 0.8rem;
    }

    .project-description {
      color: rgba(255, 255, 255, 0.7);
      font-size: 1rem;
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    .project-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .project-stats {
      display: flex;
      gap: 1.5rem;
      align-items: center;
    }

    .team-avatars {
      display: flex;
      margin-left: 1rem;
    }

    .team-avatar {
      width: 30px;
      height: 30px;
      background: linear-gradient(135deg, #43e97b, #38f9d7);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      border: 2px solid #1a1a2e;
      margin-left: -10px;
    }

    .team-avatar:first-child {
      margin-left: 0;
    }

    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      overflow-y: auto;
      padding: 2rem 0;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: rgba(26, 26, 46, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 2rem;
      max-width: 900px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      margin: auto;
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: #fff;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .modal-close:hover {
      background: rgba(255, 79, 79, 0.3);
      transform: rotate(90deg);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 600;
    }

    .form-control, .form-select, .form-textarea {
      width: 100%;
      padding: 0.8rem;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      color: #fff;
      font-size: 1rem;
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    .form-control:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: #4facfe;
      background: rgba(255, 255, 255, 0.08);
    }

    .form-select option {
      background: #1a1a2e;
    }

    .btn-submit {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      color: #fff;
      padding: 0.8rem 2rem;
      border-radius: 25px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: 1rem;
    }

    .btn-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(67, 233, 123, 0.4);
    }

    .section-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: #fff;
    }

    .file-upload-area {
      border: 2px dashed rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      background: rgba(255, 255, 255, 0.03);
      transition: all 0.3s ease;
      cursor: pointer;
      margin-bottom: 1rem;
    }

    .file-upload-area:hover {
      border-color: #4facfe;
      background: rgba(79, 172, 254, 0.05);
    }

    .file-upload-area.dragover {
      border-color: #43e97b;
      background: rgba(67, 233, 123, 0.1);
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.6;
    }

    .upload-text {
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 0.5rem;
    }

    .upload-hint {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
    }

    .file-input {
      display: none;
    }

    .file-list {
      margin-top: 1rem;
    }

    .file-item {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .file-item:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .file-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
    }

    .file-icon {
      font-size: 1.5rem;
    }

    .file-details {
      flex: 1;
    }

    .file-name {
      color: #fff;
      font-weight: 500;
      margin-bottom: 0.2rem;
    }

    .file-meta {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.85rem;
    }

    .file-actions {
      display: flex;
      gap: 0.5rem;
    }

    .btn-download, .btn-delete {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: #fff;
      width: 35px;
      height: 35px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn-download:hover {
      background: rgba(79, 172, 254, 0.3);
      color: #4facfe;
    }

    .btn-delete:hover {
      background: rgba(255, 79, 79, 0.3);
      color: #ff4f4f;
    }

    .project-details-section {
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .member-list {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }

    .member-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
      min-width: 200px;
    }

    .member-avatar {
      width: 45px;
      height: 45px;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .member-info {
      flex: 1;
    }

    .member-name {
      color: #fff;
      font-weight: 600;
      margin-bottom: 0.2rem;
    }

    .member-role {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.85rem;
    }

    .btn-join {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: #fff;
      padding: 0.8rem 2rem;
      border-radius: 25px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-join:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(79, 172, 254, 0.4);
    }

    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: rgba(26, 26, 46, 0.95);
      border: 1px solid #4facfe;
      border-radius: 15px;
      padding: 1rem 1.5rem;
      color: #fff;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      z-index: 3000;
      display: none;
    }

    .toast.active {
      display: block;
      animation: slideInRight 0.3s ease-out;
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(100px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: rgba(255, 255, 255, 0.6);
    }

    .empty-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    .progress-bar-container {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      height: 8px;
      overflow: hidden;
      margin-top: 0.5rem;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      border-radius: 10px;
      transition: width 0.3s ease;
    }

    .tag-input-container {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 0.5rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.05);
      min-height: 45px;
    }

    .tag-item {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: #fff;
      padding: 0.3rem 0.8rem;
      border-radius: 15px;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .tag-remove {
      cursor: pointer;
      font-weight: bold;
    }

    .tag-input {
      flex: 1;
      min-width: 150px;
      background: transparent;
      border: none;
      color: #fff;
      outline: none;
      padding: 0.3rem;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center w-100">
        <a class="navbar-brand" href="#">Campus Connect</a>
        <div class="d-flex">
          <a class="nav-link" href="#">Home</a>
          <a class="nav-link" href="#">Q&A Forum</a>
          <a class="nav-link active" href="#">Project Collab</a>
          <a class="nav-link" href="#">Resources</a>
          <a class="nav-link" href="#">Profile</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <h1 class="page-title">Project Collaboration</h1>
      <p class="page-subtitle">Find teammates, collaborate on projects, and build amazing things together</p>
    </div>

    <!-- Action Bar -->
    <div class="action-bar">
      <div class="search-box">
        <input type="text" class="search-input" id="searchInput" placeholder="Search projects...">
      </div>
      <select class="filter-select" id="categoryFilter">
        <option value="all">All Categories</option>
        <option value="web-dev">Web Development</option>
        <option value="mobile-dev">Mobile Development</option>
        <option value="ai-ml">AI & Machine Learning</option>
        <option value="data-science">Data Science</option>
        <option value="design">Design</option>
        <option value="other">Other</option>
      </select>
      <select class="filter-select" id="statusFilter">
        <option value="all">All Status</option>
        <option value="open">Open for Members</option>
        <option value="in-progress">In Progress</option>
        <option value="completed">Completed</option>
      </select>
      <button class="btn-create" onclick="openCreateModal()">Create Project</button>
    </div>

    <!-- Projects List -->
    <div id="projectsList"></div>
  </div>

  <!-- Create Project Modal -->
  <div class="modal-overlay" id="createModal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeCreateModal()">&times;</button>
      <h2 class="section-title">Create New Project</h2>
      <form id="createProjectForm" onsubmit="submitProject(event)">
        <div class="form-group">
          <label class="form-label">Project Category</label>
          <select class="form-select" id="projectCategory" required>
            <option value="">Select a category</option>
            <option value="web-dev">Web Development</option>
            <option value="mobile-dev">Mobile Development</option>
            <option value="ai-ml">AI & Machine Learning</option>
            <option value="data-science">Data Science</option>
            <option value="design">Design</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Project Title</label>
          <input type="text" class="form-control" id="projectTitle" placeholder="Enter project title" required>
        </div>
        <div class="form-group">
          <label class="form-label">Project Description</label>
          <textarea class="form-textarea" id="projectDescription" placeholder="Describe your project..." required></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Required Skills (Press Enter to add)</label>
          <div class="tag-input-container" id="skillsContainer">
            <input type="text" class="tag-input" id="skillInput" placeholder="e.g., React, Python, Figma">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Team Size Needed</label>
          <input type="number" class="form-control" id="teamSize" min="2" max="20" value="4" required>
        </div>
        <div class="form-group">
          <label class="form-label">Your Name</label>
          <input type="text" class="form-control" id="projectCreator" placeholder="Enter your name" required>
        </div>
        <button type="submit" class="btn-submit">Create Project</button>
      </form>
    </div>
  </div>

  <!-- View Project Modal -->
  <div class="modal-overlay" id="viewModal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeViewModal()">&times;</button>
      <div id="projectDetailsContent"></div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <script>
    // Data storage
    let projects = [
      {
        id: 1,
        category: 'web-dev',
        title: 'E-Commerce Platform for Local Businesses',
        description: 'Building a full-stack e-commerce platform to help local businesses go online. Using React, Node.js, and MongoDB.',
        creator: 'Alex Johnson',
        status: 'open',
        members: [
          { name: 'Alex Johnson', role: 'Project Lead' },
          { name: 'Sarah Smith', role: 'Frontend Developer' }
        ],
        requiredSkills: ['React', 'Node.js', 'MongoDB', 'UI/UX'],
        teamSize: 5,
        progress: 30,
        files: [
          { name: 'Project Proposal.pdf', size: '2.4 MB', uploadedBy: 'Alex Johnson', date: new Date('2024-10-20') },
          { name: 'Wireframes.fig', size: '8.1 MB', uploadedBy: 'Sarah Smith', date: new Date('2024-10-22') }
        ],
        createdAt: new Date('2024-10-18')
      },
      {
        id: 2,
        category: 'ai-ml',
        title: 'Campus Chatbot Assistant',
        description: 'Developing an AI-powered chatbot to help students with campus queries, course selection, and general information.',
        creator: 'Michael Chen',
        status: 'in-progress',
        members: [
          { name: 'Michael Chen', role: 'ML Engineer' },
          { name: 'Emma Wilson', role: 'Backend Developer' },
          { name: 'David Lee', role: 'NLP Specialist' }
        ],
        requiredSkills: ['Python', 'TensorFlow', 'NLP', 'FastAPI'],
        teamSize: 4,
        progress: 65,
        files: [
          { name: 'Training Data.csv', size: '15.2 MB', uploadedBy: 'Michael Chen', date: new Date('2024-10-15') },
          { name: 'Model Architecture.py', size: '45 KB', uploadedBy: 'David Lee', date: new Date('2024-10-20') }
        ],
        createdAt: new Date('2024-10-10')
      },
      {
        id: 3,
        category: 'mobile-dev',
        title: 'Campus Event Tracker App',
        description: 'A mobile app to track and get notifications about all campus events, clubs, and activities.',
        creator: 'Lisa Brown',
        status: 'open',
        members: [
          { name: 'Lisa Brown', role: 'iOS Developer' }
        ],
        requiredSkills: ['React Native', 'Firebase', 'UI Design'],
        teamSize: 4,
        progress: 20,
        files: [
          { name: 'App Mockups.pdf', size: '5.8 MB', uploadedBy: 'Lisa Brown', date: new Date('2024-10-23') }
        ],
        createdAt: new Date('2024-10-22')
      }
    ];

    let currentProjectId = null;
    let skills = [];

    // Initialize
    function init() {
      renderProjects();
      setupEventListeners();
      setupSkillsInput();
    }

    // Setup event listeners
    function setupEventListeners() {
      document.getElementById('searchInput').addEventListener('input', filterProjects);
      document.getElementById('categoryFilter').addEventListener('change', filterProjects);
      document.getElementById('statusFilter').addEventListener('change', filterProjects);
    }

    // Setup skills input
    function setupSkillsInput() {
      const skillInput = document.getElementById('skillInput');
      if (!skillInput) return;
      
      skillInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          const skill = skillInput.value.trim();
          if (skill && !skills.includes(skill)) {
            skills.push(skill);
            renderSkillsTags();
          }
        }
      });
    }

    // Render skills tags
    function renderSkillsTags() {
      const container = document.getElementById('skillsContainer');
      if (!container) return;
      
      const tagsHtml = skills.map((skill, index) => `
        <span class="tag-item">
          ${skill}
          <span class="tag-remove" onclick="removeSkill(${index})">×</span>
        </span>
      `).join('');
      
      container.innerHTML = tagsHtml + `<input type="text" class="tag-input" id="skillInput" placeholder="e.g., React, Python, Figma">`;
      
      // Re-setup the event listener for the new input
      setupSkillsInput();
    }

    // Remove skill
    function removeSkill(index) {
      skills.splice(index, 1);
      renderSkillsTags();
    }

    // Format category
    function formatCategory(category) {
      return category.split('-').map(word => 
        word.charAt(0).toUpperCase() + word.slice(1)
      ).join(' ');
    }

    // Format date
    function formatDate(date) {
      const now = new Date();
      const diff = now - date;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      
      if (days === 0) return 'Today';
      if (days === 1) return 'Yesterday';
      if (days < 7) return `${days} days ago`;
      return date.toLocaleDateString();
    }

    // Format file size
    function formatFileSize(bytes) {
      if (bytes < 1024) return bytes + ' B';
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
      return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
    }

    // Get file icon
    function getFileIcon(filename) {
      const ext = filename.split('.').pop().toLowerCase();
      const icons = {
        'pdf': '📄',
        'doc': '📝',
        'docx': '📝',
        'xls': '📊',
        'xlsx': '📊',
        'ppt': '📊',
        'pptx': '📊',
        'zip': '🗜️',
        'rar': '🗜️',
        'jpg': '🖼️',
        'jpeg': '🖼️',
        'png': '🖼️',
        'gif': '🖼️',
        'mp4': '🎥',
        'mov': '🎥',
        'py': '🐍',
        'js': '📜',
        'html': '🌐',
        'css': '🎨',
        'fig': '🎨',
        'sketch': '🎨'
      };
      return icons[ext] || '📎';
    }

    // Render projects
    function renderProjects() {
      const container = document.getElementById('projectsList');
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const categoryFilter = document.getElementById('categoryFilter').value;
      const statusFilter = document.getElementById('statusFilter').value;

      let filteredProjects = projects.filter(p => {
        const matchesSearch = p.title.toLowerCase().includes(searchTerm) || 
                            p.description.toLowerCase().includes(searchTerm);
        const matchesCategory = categoryFilter === 'all' || p.category === categoryFilter;
        const matchesStatus = statusFilter === 'all' || p.status === statusFilter;
        return matchesSearch && matchesCategory && matchesStatus;
      });

      if (filteredProjects.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">🔍</div>
            <h3>No projects found</h3>
            <p>Try adjusting your search or filters, or create a new project!</p>
          </div>
        `;
        return;
      }

      container.innerHTML = filteredProjects.map(p => `
        <div class="project-card" onclick="viewProject(${p.id})">
          <div class="project-header">
            <div>
              <span class="project-tag">${formatCategory(p.category)}</span>
              <h3 class="project-title">${p.title}</h3>
            </div>
            <span class="project-status status-${p.status}">${formatStatus(p.status)}</span>
          </div>
          <p class="project-description">${p.description}</p>
          <div style="margin-bottom: 1rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.3rem;">
              <span style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">Progress</span>
              <span style="color: #43e97b; font-weight: 600;">${p.progress}%</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" style="width: ${p.progress}%"></div>
            </div>
          </div>
          <div class="project-meta">
            <div style="display: flex; align-items: center; gap: 1rem;">
              <span>👤 ${p.creator}</span>
              <span>• ${formatDate(p.createdAt)}</span>
            </div>
            <div class="project-stats">
              <span>👥 ${p.members.length}/${p.teamSize} members</span>
              <span>📁 ${p.files.length} files</span>
              <div class="team-avatars">
                ${p.members.slice(0, 3).map(m => `
                  <div class="team-avatar">${m.name.charAt(0)}</div>
                `).join('')}
                ${p.members.length > 3 ? `<div class="team-avatar">+${p.members.length - 3}</div>` : ''}
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Format status
    function formatStatus(status) {
      const statusMap = {
        'open': 'Open for Members',
        'in-progress': 'In Progress',
        'completed': 'Completed'
      };
      return statusMap[status] || status;
    }

    // Filter projects
    function filterProjects() {
      renderProjects();
    }

    // Open create modal
    function openCreateModal() {
      skills = [];
      const modal = document.getElementById('createModal');
      modal.classList.add('active');
      // Reset form
      document.getElementById('createProjectForm').reset();
      // Clear skills container
      const container = document.getElementById('skillsContainer');
      container.innerHTML = `<input type="text" class="tag-input" id="skillInput" placeholder="e.g., React, Python, Figma">`;
      setupSkillsInput();
    }

    // Close create modal
    function closeCreateModal() {
      document.getElementById('createModal').classList.remove('active');
      document.getElementById('createProjectForm').reset();
      skills = [];
      renderSkillsTags();
    }

    // Submit project
    function submitProject(e) {
      e.preventDefault();
      
      const newProject = {
        id: projects.length + 1,
        category: document.getElementById('projectCategory').value,
        title: document.getElementById('projectTitle').value,
        description: document.getElementById('projectDescription').value,
        creator: document.getElementById('projectCreator').value,
        status: 'open',
        members: [
          { name: document.getElementById('projectCreator').value, role: 'Project Lead' }
        ],
        requiredSkills: [...skills],
        teamSize: parseInt(document.getElementById('teamSize').value),
        progress: 0,
        files: [],
        createdAt: new Date()
      };

      projects.unshift(newProject);
      renderProjects();
      closeCreateModal();
      showToast('Project created successfully!');
    }

    // View project
    function viewProject(id) {
      currentProjectId = id;
      const project = projects.find(p => p.id === id);
      if (!project) return;

      const detailsHtml = `
        <div class="project-details-section">
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
            <div>
              <span class="project-tag">${formatCategory(project.category)}</span>
              <h2 class="project-title">${project.title}</h2>
            </div>
            <span class="project-status status-${project.status}">${formatStatus(project.status)}</span>
          </div>
          <p class="project-description">${project.description}</p>
          
          <div style="margin: 1.5rem 0;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
              <span style="color: rgba(255,255,255,0.8); font-weight: 600;">Project Progress</span>
              <span style="color: #43e97b; font-weight: 600; font-size: 1.1rem;">${project.progress}%</span>
            </div>
            <div class="progress-bar-container" style="height: 12px;">
              <div class="progress-bar" style="width: ${project.progress}%"></div>
            </div>
          </div>

          <div style="margin: 1.5rem 0;">
            <strong style="color: rgba(255,255,255,0.8);">Required Skills:</strong>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
              ${project.requiredSkills.map(skill => `
                <span class="tag-item">${skill}</span>
              `).join('')}
            </div>
          </div>

          ${project.members.length < project.teamSize ? `
            <button class="btn-join" onclick="joinProject(${project.id})">
              Join Project (${project.members.length}/${project.teamSize} spots filled)
            </button>
          ` : ''}
        </div>

        <div class="project-details-section">
          <h3 class="section-title">Team Members (${project.members.length})</h3>
          <div class="member-list">
            ${project.members.map(member => `
              <div class="member-card">
                <div class="member-avatar">${member.name.charAt(0)}</div>
                <div class="member-info">
                  <div class="member-name">${member.name}</div>
                  <div class="member-role">${member.role}</div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>

        <div class="project-details-section">
          <h3 class="section-title">Project Files (${project.files.length})</h3>
          
          <div class="file-upload-area" id="fileUploadArea" onclick="document.getElementById('fileInput').click()">
            <div class="upload-icon">📤</div>
            <div class="upload-text">Click to upload or drag and drop files</div>
            <div class="upload-hint">PDF, DOC, Images, Videos, Archives (Max 50MB)</div>
          </div>
          <input type="file" id="fileInput" class="file-input" multiple onchange="handleFileUpload(event)">

          <div class="file-list" id="fileList">
            ${project.files.map((file, index) => `
              <div class="file-item">
                <div class="file-info">
                  <div class="file-icon">${getFileIcon(file.name)}</div>
                  <div class="file-details">
                    <div class="file-name">${file.name}</div>
                    <div class="file-meta">${file.size} • Uploaded by ${file.uploadedBy} • ${formatDate(file.date)}</div>
                  </div>
                </div>
                <div class="file-actions">
                  <button class="btn-download" onclick="downloadFile(${project.id}, ${index})" title="Download">⬇️</button>
                  <button class="btn-delete" onclick="deleteFile(${project.id}, ${index})" title="Delete">🗑️</button>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;

      document.getElementById('projectDetailsContent').innerHTML = detailsHtml;
      document.getElementById('viewModal').classList.add('active');
      setupDragAndDrop();
    }

    // Setup drag and drop
    function setupDragAndDrop() {
      const dropArea = document.getElementById('fileUploadArea');
      if (!dropArea) return;

      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
      });

      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }

      ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, () => {
          dropArea.classList.add('dragover');
        }, false);
      });

      ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, () => {
          dropArea.classList.remove('dragover');
        }, false);
      });

      dropArea.addEventListener('drop', handleDrop, false);
    }

    // Handle drop
    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      handleFiles(files);
    }

    // Handle file upload
    function handleFileUpload(e) {
      const files = e.target.files;
      handleFiles(files);
    }

    // Handle files
    function handleFiles(files) {
      const project = projects.find(p => p.id === currentProjectId);
      if (!project) return;

      Array.from(files).forEach(file => {
        const newFile = {
          name: file.name,
          size: formatFileSize(file.size),
          uploadedBy: 'Current User',
          date: new Date()
        };
        project.files.push(newFile);
      });

      showToast(`${files.length} file(s) uploaded successfully!`);
      viewProject(currentProjectId);
      renderProjects();
    }

    // Download file
    function downloadFile(projectId, fileIndex) {
      const project = projects.find(p => p.id === projectId);
      if (!project) return;
      
      const file = project.files[fileIndex];
      showToast(`Downloading ${file.name}...`);
    }

    // Delete file
    function deleteFile(projectId, fileIndex) {
      const project = projects.find(p => p.id === projectId);
      if (!project) return;
      
      const file = project.files[fileIndex];
      if (confirm(`Are you sure you want to delete ${file.name}?`)) {
        project.files.splice(fileIndex, 1);
        showToast('File deleted successfully!');
        viewProject(projectId);
        renderProjects();
      }
    }

    // Join project
    function joinProject(id) {
      const project = projects.find(p => p.id === id);
      if (!project) return;

      if (project.members.length >= project.teamSize) {
        showToast('This project is full!');
        return;
      }

      const name = prompt('Enter your name:');
      if (!name) return;

      const role = prompt('What role would you like? (e.g., Developer, Designer, Tester)');
      if (!role) return;

      project.members.push({ name, role });
      
      if (project.members.length >= project.teamSize) {
        project.status = 'in-progress';
      }

      showToast('Successfully joined the project!');
      viewProject(id);
      renderProjects();
    }

    // Close view modal
    function closeViewModal() {
      document.getElementById('viewModal').classList.remove('active');
      currentProjectId = null;
    }

    // Show toast
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('active');
      
      setTimeout(() => {
        toast.classList.remove('active');
      }, 3000);
    }

    // Close modals on outside click
    document.getElementById('createModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeCreateModal();
      }
    });

    document.getElementById('viewModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeViewModal();
      }
    });

    // Initialize app
    init();
  </script>
</body>
</html>